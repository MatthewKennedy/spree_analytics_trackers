  <% if tracker = Spree::Tracker.current(:google_analytics)  %>

      <script async src='https://www.googletagmanager.com/gtag/js?id=<%= tracker.analytics_id %>'></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '<%= tracker.analytics_id %>', {
        <% if ['product-details','cart', 'checkout-page', 'purchase'].include?(@body_id) %>
          'send_page_view': false,
        <% end %>
          'currency': '<%= current_currency %>',
          'custom_map': {
            'dimension1': 'ecomm_prodid',
            'dimension2': 'ecomm_pagetype',
            'dimension3': 'ecomm_totalvalue',
            'dimension4': 'ecomm_catagory'
          }

        });
      </script>

  <% end %>
